import{j as e,r as n,R as T,a as I,f as Q}from"./app-CafyKgex.js";import{L as O}from"./Layout-BPavUqXo.js";import z from"./breadcrumbs-hSS_l7S8.js";const D=({currentQuestion:t,selectedChoice:s,onChoiceClick:d,onNext:l,formatElapsedTime:a,questionNumber:x,totalQuestions:b})=>e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-4 text-green-700",children:["ðŸ“‹ Question ",x," of ",b]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Elapsed Time: ",a]}),e.jsxs("div",{className:"p-6 bg-white border rounded-2xl shadow relative",children:[e.jsx("p",{className:"font-semibold mb-4",children:t.question}),e.jsx("ul",{className:"space-y-2",children:t.choices.map((m,r)=>{let u="";return s&&(m===t.answer?u="bg-green-200 border-green-500":m===s&&(u="bg-red-200 border-red-500")),e.jsx("li",{children:e.jsx("button",{onClick:()=>d(m),disabled:!!s,className:`block w-full text-left p-2 border rounded ${u} pointer-events-auto ${s?"":"hover:bg-gray-100"}`,children:m})},r)})}),s&&e.jsxs("div",{className:"mt-4 p-3 rounded border bg-gray-100 border-gray-300",children:[e.jsx("p",{className:"font-semibold",children:"Explanation:"}),e.jsx("p",{className:"mt-2",children:t.explanation})]}),s&&e.jsx("button",{onClick:l,className:"mt-6 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:x<b?"Next":"Finish"})]})]}),F=({score:t,total:s,percentage:d,formatElapsedTime:l,passed:a,onRetake:x,onNextPart:b,userAnswers:m})=>{const[r,u]=n.useState(!1),h=()=>{u(!1),setTimeout(()=>window.print(),100)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-green-700",children:"âœ… Summary"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-1",children:[e.jsxs("p",{children:["Points: ",t," / ",s]}),e.jsxs("p",{children:["Percentage Score: ",d.toFixed(2),"%"]}),e.jsxs("p",{children:["Total Time: ",l]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition",children:"Retake"}),e.jsx("button",{onClick:b,disabled:!a,className:`px-4 py-2 rounded transition font-semibold text-white
              ${a?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed opacity-75"}`,children:"Next Part"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition",children:"Print"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Review of Answers:"}),m.map((o,f)=>e.jsxs("div",{className:"p-4 border rounded mb-4 bg-white",children:[e.jsx("p",{className:"font-semibold",children:`${f+1}. ${o.question}`}),e.jsx("ul",{className:"list-disc list-inside mb-2",children:o.choices.map((p,w)=>{const N=p===o.correct?"text-green-600":p===o.selected?"text-red-600":"";return e.jsx("li",{className:N,children:p},w)})}),e.jsxs("p",{className:"text-sm",children:["Your Answer:"," ",e.jsx("span",{className:o.selected===o.correct?"text-green-600":"text-red-600",children:o.selected})]}),e.jsxs("p",{className:"text-sm",children:["Correct Answer:"," ",e.jsx("span",{className:"text-green-600",children:o.correct})]}),e.jsx("p",{className:"text-sm italic mt-1",children:o.explanation})]},f))]})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Support Our Site"}),e.jsx("p",{className:"mb-4",children:"If you find this site helpful, you can donate any amount by scanning the Gcash QR code below."}),e.jsx("img",{src:"/images/gcash-qr.webp",alt:"Donation QR Code",className:"mx-auto w-48 h-48 mb-4"}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Continue to Print"})]})})]})},J=({subjectName:t,part:s,onStart:d})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full text-center text-gray-900",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Welcome to ",t," Part ",s]}),e.jsxs("p",{className:"mb-4",children:["You are about to start ",e.jsxs("strong",{children:["Part ",s]})," of ",e.jsx("strong",{children:t}),". Aim to score at least ",e.jsx("strong",{children:"80%"})," to unlock the next part!"]}),e.jsx("p",{className:"italic mb-6",children:"Stay focused and do your best. Youâ€™ve got this! ðŸ’ª"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Start Quiz"})]})}),Y=T.memo(J),L=t=>[...t].sort(()=>Math.random()-.5),H=({questions:t,subjectId:s,subjectName:d,part:l,examId:a,seo:x})=>{const[b,m]=n.useState(!0),[r,u]=n.useState(()=>L(t)),[h,o]=n.useState(0),[f,p]=n.useState(null),[w,N]=n.useState(0),[k,C]=n.useState([]),[y,P]=n.useState(!1),[j,R]=n.useState(0),g=n.useRef(null);n.useEffect(()=>(g.current=window.setInterval(()=>R(i=>i+1),1e3),()=>{g.current&&window.clearInterval(g.current)}),[]),n.useEffect(()=>{y&&g.current&&window.clearInterval(g.current)},[y]);const E=n.useCallback(i=>{p(i);const c=r[h];i===c.answer&&N(S=>S+1),C(S=>{const $=[...S,{questionId:c.id,question:c.question,choices:c.choices,selected:i,correct:c.answer,explanation:c.explanation}],M=`prc_progress_${a}_${s}_${l}`;return window.localStorage.setItem(M,JSON.stringify({answered:$.length,total:r.length})),$})},[h,r,a,s,l]),q=()=>{if(h+1<r.length)o(i=>i+1),p(null);else{const i=`prc_unlocked_${a}_${s}`,c=JSON.parse(window.localStorage.getItem(i)||"[]");c.includes(l)||(c.push(l),window.localStorage.setItem(i,JSON.stringify(c))),P(!0)}},v=Math.round(w/r.length*100),_=v>=80,A=[{label:"Home",href:"/"},{label:d,href:`/exams/${a}/subjects/${s}/parts`},{label:`Part ${l}`}];return e.jsxs(O,{children:[e.jsxs(I,{children:[e.jsx("title",{children:x.title}),e.jsx("meta",{name:"description",content:x.description}),e.jsx("link",{rel:"canonical",href:x.canonical})]}),b?e.jsx(Y,{subjectName:d,part:l,onStart:()=>m(!1)}):y?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(F,{score:w,total:r.length,percentage:v,formatElapsedTime:`${Math.floor(j/60)}m ${j%60}s`,passed:_,onRetake:()=>window.location.reload(),onNextPart:()=>Q.visit(`/exams/${a}/subjects/${s}/parts/${l+1}/questions`),userAnswers:k})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx(z,{items:A}),e.jsx(D,{currentQuestion:r[h],selectedChoice:f,onChoiceClick:E,onNext:q,questionNumber:h+1,totalQuestions:r.length,formatElapsedTime:`${Math.floor(j/60)}m ${j%60}s`})]})]})};export{H as default};
