import{R as x,r as h,j as o,J as y}from"./app-Cll-i-AM.js";const $=({parts:m,examId:a,subjectId:n})=>{const[p,u]=h.useState([1]);return h.useEffect(()=>{const s=`prc_unlocked_${a}_${n}`,t=localStorage.getItem(s);let i=[1];if(t)try{const e=JSON.parse(t);Array.isArray(e)&&(i=e.map(r=>Number(r)))}catch{}const d=m.reduce((e,r)=>{const c=`prc_progress_${a}_${n}_${r.id}`,l=localStorage.getItem(c);if(l)try{const{answered:g,total:f}=JSON.parse(l);f>0&&g>=f&&e.push(r.id)}catch{}return e},[]);u(Array.from(new Set([...i,...d])))},[a,n,m]),o.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:m.map(s=>{const t=p.includes(s.id),i=`prc_progress_${a}_${n}_${s.id}`,d=localStorage.getItem(i);let e=0,r=!1;if(d)try{const{answered:c,total:l}=JSON.parse(d);e=l>0?Math.round(c/l*100):0,r=!0}catch{}else t&&(e=100,r=!0);return o.jsxs(y,{href:t?`/exams/${a}/subjects/${n}/parts/${s.id}/questions`:"#",className:`p-6 bg-white border rounded-2xl shadow-sm transition-transform flex flex-col justify-between h-32
              ${t?"hover:shadow-md hover:-translate-y-1 cursor-pointer":"opacity-50 cursor-not-allowed"}
            `,onClick:c=>{t||c.preventDefault()},children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s.name}),r&&o.jsxs("p",{className:"mt-1 text-sm text-green-600",children:[e,"% completed"]})]}),!t&&o.jsxs("p",{className:"mt-2 text-red-500 text-sm",children:["Unlock by finishing Part ",s.id-1]})]},s.id)})})},w=x.memo($);export{w as default};
