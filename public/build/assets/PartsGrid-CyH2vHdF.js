import{R as x,r as h,j as o,J as y}from"./app-BiHMfYov.js";const $=({parts:m,examId:n,subjectId:c})=>{const[p,f]=h.useState([1]);return h.useEffect(()=>{const s=`prc_unlocked_${n}_${c}`,t=localStorage.getItem(s);let l=[1];if(t)try{const e=JSON.parse(t);Array.isArray(e)&&(l=e.map(r=>Number(r)))}catch{}const d=m.reduce((e,r)=>{const a=`prc_progress_${n}_${c}_${r.id}`,i=localStorage.getItem(a);if(i)try{const{answered:u,total:g}=JSON.parse(i);g>0&&u>=g&&e.push(r.id)}catch{}return e},[]);f([...new Set([...l,...d])])},[n,c,m]),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:m.map(s=>{const t=p.includes(s.id),l=`prc_progress_${n}_${c}_${s.id}`,d=localStorage.getItem(l);let e=0,r=!1;if(d)try{const{answered:a,total:i}=JSON.parse(d);e=i>0?Math.round(a/i*100):0,r=!0}catch{}else t&&(r=!0,e=0);return o.jsxs(y,{href:t?`/exams/${n}/subjects/${c}/parts/${s.id}/questions`:"#",onClick:a=>{t||a.preventDefault()},className:`
              p-5 bg-white border rounded-2xl shadow-sm transition-transform
              flex flex-col justify-between min-h-[150px]
              ${t?"hover:shadow-md hover:-translate-y-1 cursor-pointer":"opacity-50 cursor-not-allowed"}
            `,children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:s.name}),r&&o.jsxs("p",{className:"mt-2 text-sm text-green-600",children:[e,"% completed"]})]}),!t&&o.jsxs("p",{className:"mt-4 text-red-500 text-sm",children:["Unlock by finishing Part ",s.id-1]})]},s.id)})})},w=x.memo($);export{w as default};
