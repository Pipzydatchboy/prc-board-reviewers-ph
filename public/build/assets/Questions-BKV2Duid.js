import{j as e,r as n,R as T,a as z,f as O}from"./app-C9AGtsae.js";import{L as D}from"./Layout-6YJIRTlm.js";import F from"./breadcrumbs-DmWygfwi.js";const J=({currentQuestion:a,selectedChoice:t,onChoiceClick:r,onNext:l,formatElapsedTime:d,questionNumber:x,totalQuestions:p})=>e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-4 text-green-700 antialiased",children:["ðŸ“‹ Question ",x," of ",p]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4 antialiased",children:["Elapsed Time: ",d]}),e.jsxs("div",{className:"p-6 bg-white border rounded-2xl shadow relative text-gray-800 antialiased",children:[e.jsx("p",{className:"font-semibold mb-4 text-lg leading-relaxed",children:a.question}),e.jsx("ul",{className:"space-y-2",children:a.choices.map((m,o)=>{let u="";return t&&(m===a.answer?u="bg-green-200 border-green-500":m===t&&(u="bg-red-200 border-red-500")),e.jsx("li",{children:e.jsx("button",{onClick:()=>r(m),disabled:!!t,className:`block w-full text-left p-3 border rounded text-gray-800 ${u} ${t?"":"hover:bg-gray-100"}`,children:m})},o)})}),t&&e.jsxs("div",{className:"mt-6 p-4 rounded border bg-gray-100 border-gray-300",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Explanation:"}),e.jsx("p",{className:"italic leading-relaxed",children:a.explanation})]}),t&&e.jsx("button",{onClick:l,className:"mt-6 px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:x<p?"Next Question":"Finish"})]})]}),Y=({score:a,total:t,percentage:r,formatElapsedTime:l,passed:d,onRetake:x,onNextPart:p,userAnswers:m})=>{const[o,u]=n.useState(!1),b=()=>{u(!1),setTimeout(()=>window.print(),100)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-green-700 antialiased",children:"âœ… Summary"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-1 text-gray-800 antialiased",children:[e.jsxs("p",{children:["Points: ",a," / ",t]}),e.jsxs("p",{children:["Percentage Score: ",r.toFixed(2),"%"]}),e.jsxs("p",{children:["Total Time: ",l]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-2 text-gray-800 antialiased",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition",children:"Retake"}),e.jsx("button",{onClick:p,disabled:!d,className:`px-4 py-2 rounded transition font-semibold text-white
              ${d?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed opacity-75"}`,children:"Next Part"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition",children:"Print"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 antialiased",children:"Review of Answers:"}),m.map((i,w)=>e.jsxs("div",{className:"p-4 border rounded mb-4 bg-white text-gray-800 antialiased",children:[e.jsx("p",{className:"font-semibold mb-2",children:`${w+1}. ${i.question}`}),e.jsx("ul",{className:"list-disc list-inside mb-2",children:i.choices.map((g,j)=>{const N=g===i.correct?"text-green-600":g===i.selected?"text-red-600":"text-gray-700";return e.jsx("li",{className:N,children:g},j)})}),e.jsxs("p",{className:"text-sm",children:["Your Answer:"," ",e.jsx("span",{className:i.selected===i.correct?"text-green-600":"text-red-600",children:i.selected})]}),e.jsxs("p",{className:"text-sm",children:["Correct Answer:"," ",e.jsx("span",{className:"text-green-600",children:i.correct})]}),e.jsx("p",{className:"text-sm italic mt-1",children:i.explanation})]},w))]})]}),o&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full text-center text-gray-800 antialiased",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Support Our Site"}),e.jsx("p",{className:"mb-4",children:"If you find this site helpful, you can donate any amount by scanning the Gcash QR code below."}),e.jsx("img",{src:"/images/gcash-qr.webp",alt:"Donation QR Code",className:"mx-auto w-48 h-48 mb-4"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Continue to Print"})]})})]})},L=({subjectName:a,part:t,onStart:r})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full text-center text-gray-900",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Welcome to ",a," Part ",t]}),e.jsxs("p",{className:"mb-4",children:["You are about to start ",e.jsxs("strong",{children:["Part ",t]})," of ",e.jsx("strong",{children:a}),". Aim to score at least ",e.jsx("strong",{children:"80%"})," to unlock the next part!"]}),e.jsx("p",{className:"italic mb-6",children:"Stay focused and do your best. Youâ€™ve got this! ðŸ’ª"}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Start Quiz"})]})}),V=T.memo(L),R=a=>{const t=[...a];for(let r=t.length-1;r>0;r--){const l=Math.floor(Math.random()*(r+1));[t[r],t[l]]=[t[l],t[r]]}return t},K=({questions:a,subjectId:t,subjectName:r,part:l,examId:d,seo:x})=>{const[p,m]=n.useState(!0),[o,u]=n.useState([]),[b,i]=n.useState(0),[w,g]=n.useState(null),[j,N]=n.useState(0),[A,$]=n.useState([]),[S,C]=n.useState(!1),[y,v]=n.useState(0),h=n.useRef(null);n.useEffect(()=>(h.current=window.setInterval(()=>v(c=>c+1),1e3),()=>{h.current&&window.clearInterval(h.current)}),[]),n.useEffect(()=>{S&&h.current&&window.clearInterval(h.current)},[S]);const k=n.useCallback(()=>{const c=R(a).map(s=>{const f=R(s.choices);return{...s,choices:f}});u(c),i(0),g(null),N(0),$([]),C(!1),v(0),h.current&&window.clearInterval(h.current),h.current=window.setInterval(()=>v(s=>s+1),1e3)},[a]);n.useEffect(()=>{k()},[k]);const I=n.useCallback(c=>{g(c);const s=o[b];c===s.answer&&N(f=>f+1),$(f=>{const P=[...f,{questionId:s.id,question:s.question,choices:s.choices,selected:c,correct:s.answer,explanation:s.explanation}],Q=`prc_progress_${d}_${t}_${l}`;return window.localStorage.setItem(Q,JSON.stringify({answered:P.length,total:o.length})),P})},[b,o,d,t,l]),M=()=>{if(b+1<o.length)i(c=>c+1),g(null);else{const c=`prc_unlocked_${d}_${t}`,s=JSON.parse(window.localStorage.getItem(c)||"[]");s.includes(l)||(s.push(l),window.localStorage.setItem(c,JSON.stringify(s))),C(!0)}},E=Math.round(j/o.length*100),_=E>=80,q=[{label:"Home",href:"/"},{label:r,href:`/exams/${d}/subjects/${t}/parts`},{label:`Part ${l}`}];return e.jsxs(D,{children:[e.jsxs(z,{children:[e.jsx("title",{children:x.title}),e.jsx("meta",{name:"description",content:x.description}),e.jsx("link",{rel:"canonical",href:x.canonical})]}),p?e.jsx(V,{subjectName:r,part:l,onStart:()=>m(!1)}):S?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(Y,{score:j,total:o.length,percentage:E,formatElapsedTime:`${Math.floor(y/60)}m ${y%60}s`,passed:_,onRetake:k,onNextPart:()=>O.visit(`/exams/${d}/subjects/${t}/parts/${l+1}/questions`),userAnswers:A})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx(F,{items:q}),e.jsx(J,{currentQuestion:o[b],selectedChoice:w,onChoiceClick:I,onNext:M,questionNumber:b+1,totalQuestions:o.length,formatElapsedTime:`${Math.floor(y/60)}m ${y%60}s`})]})]})};export{K as default};
