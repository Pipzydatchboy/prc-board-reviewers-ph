const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/breadcrumbs-B6SLeVUS.js","assets/app-Ch2qSLNb.js","assets/app-DQtbyjpb.css","assets/QuestionView-yf7-wkBG.js","assets/SummaryView-CEEF-tj3.js","assets/IntroModal-BSEF6yrb.js","assets/RetakeModal-BvATeD5C.js","assets/NextModal-BjJTkCSJ.js"])))=>i.map(i=>d[i]);
import{j as t,r as e,a as G,_ as d,f as W}from"./app-Ch2qSLNb.js";import{L as X}from"./Layout-DHYrx6sm.js";const Z=({isOpen:c,onClose:l,title:i,message:o})=>c?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:i}),t.jsx("p",{className:"mb-6 text-gray-700",children:o}),t.jsx("button",{onClick:l,className:"w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition",children:"Close"})]})}):null,ee=e.lazy(()=>d(()=>import("./breadcrumbs-B6SLeVUS.js"),__vite__mapDeps([0,1,2]))),te=e.lazy(()=>d(()=>import("./QuestionView-yf7-wkBG.js"),__vite__mapDeps([3,1,2]))),se=e.lazy(()=>d(()=>import("./SummaryView-CEEF-tj3.js"),__vite__mapDeps([4,1,2]))),ae=e.lazy(()=>d(()=>import("./IntroModal-BSEF6yrb.js"),__vite__mapDeps([5,1,2]))),oe=e.lazy(()=>d(()=>import("./RetakeModal-BvATeD5C.js"),__vite__mapDeps([6,1,2]))),ne=e.lazy(()=>d(()=>import("./NextModal-BjJTkCSJ.js"),__vite__mapDeps([7,1,2]))),I=c=>[...c].sort(()=>Math.random()-.5),ie=({questions:c,subjectId:l,subjectName:i,part:o,examType:re,examId:m})=>{const[S,T]=e.useState(!0),[w,y]=e.useState(!1),[v,b]=e.useState(!1),[n,O]=e.useState(()=>I(c)),[u,E]=e.useState(0),[z,f]=e.useState(null),[j,N]=e.useState(0),[p,k]=e.useState(!1),[A,M]=e.useState(!1),[L,C]=e.useState([]),[_,g]=e.useState(0),h=e.useRef(null),Q=()=>T(!1),V=()=>y(!0),D=()=>b(!0),q=()=>{y(!1),B()},J=()=>{b(!1);const s=`prc_unlocked_${m}_${l}`,a=JSON.parse(localStorage.getItem(s)||"[1]"),x=o+1;a.includes(x)||(a.push(x),localStorage.setItem(s,JSON.stringify(a))),W.visit(`/exams/${m}/subjects/${l}/parts/${x}/questions`)},B=()=>{clearInterval(h.current),g(0),h.current=setInterval(()=>g(s=>s+1),1e3),O(I(c)),E(0),f(null),N(0),k(!1),C([])};e.useEffect(()=>(h.current=setInterval(()=>g(s=>s+1),1e3),()=>clearInterval(h.current)),[]),e.useEffect(()=>{p&&clearInterval(h.current)},[p]);const r=n[u],R=e.useCallback(()=>{u<n.length-1?(E(s=>s+1),f(null)):k(!0)},[u,n.length]),H=e.useCallback(()=>R(),[R]),F=e.useCallback(s=>{f(s),s===r.answer&&N(a=>a+1),C(a=>[...a,{questionId:r.id,question:r.question,choices:r.choices,selected:s,correct:r.answer,explanation:r.explanation}]);try{const a=`prc_progress_${m}_${l}_${o}`,x=u+1,Y=n.length;localStorage.setItem(a,JSON.stringify({answered:x,total:Y}))}catch(a){console.error("Failed to save progress:",a)}},[r,u,n.length,m,l,o]),$=e.useMemo(()=>`${Math.floor(_/60)}m ${_%60}s`,[_]),P=j/n.length*100,K=P>=80,U=[{label:"Home",href:"/"},{label:"Exams",href:"/exams"},{label:i,href:`/exams/${m}/subjects/${l}/parts`},{label:`Part ${o}`}];return t.jsxs(X,{children:[t.jsx(G,{title:`${i} Part ${o} Questions | PRC Board Reviewers PH`,children:t.jsx("meta",{name:"description",content:`Part ${o} of ${i} quiz.`})}),t.jsxs(e.Suspense,{fallback:null,children:[S&&t.jsx(ae,{subjectName:i,part:o,onStart:Q}),w&&t.jsx(oe,{onRetake:q}),v&&t.jsx(ne,{part:o,onContinue:J})]}),!(S||w||v)&&t.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[t.jsx(e.Suspense,{fallback:t.jsx("div",{className:"mb-4 h-4 w-32 bg-gray-200 animate-pulse rounded"}),children:t.jsx(ee,{items:U})}),t.jsx(e.Suspense,{fallback:t.jsxs("div",{className:"animate-pulse space-y-4 py-10",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-48 bg-gray-200 rounded w-full"}),t.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2"})]}),children:p?t.jsx(se,{score:j,total:n.length,percentage:P,formatElapsedTime:$,passed:K,userAnswers:L,onRetake:V,onNextPart:D}):t.jsx(te,{currentQuestion:r,selectedChoice:z,onChoiceClick:F,onNext:H,formatElapsedTime:$,questionNumber:u+1,totalQuestions:n.length})}),t.jsx(Z,{isOpen:A,onClose:()=>M(!1),title:"Oops! ðŸ˜Ÿ",message:"You need at least 80% to proceed."})]})]})};export{ie as default};
