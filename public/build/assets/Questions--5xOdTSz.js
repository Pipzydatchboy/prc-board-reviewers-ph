import{r as n,j as e,R as K,a as W,f as B}from"./app-6Q7CTE__.js";import{L}from"./Layout-Du60PpxT.js";import V from"./breadcrumbs-DP2rPMb7.js";const H=["Trust in Godâ€™s plan as you prepare; He gives you strength for each study session.","Begin each study time with a prayer asking for wisdom and focus.","Remember: your effort honors God, no matter the outcome.","When you feel overwhelmed, pause and let His peace calm your mind.","Every chapter you review is a step closer to growing in faith and knowledge.","Godâ€™s grace is enoughâ€”even when the material feels hard.","Pray over each verse; let His Spirit guide your understanding.","A peaceful heart studies better: invite Godâ€™s presence into your work.","Thank God for the opportunity to learn His Word and serve others.","Small progress each day pleases God; keep taking steady steps forward.","When youâ€™re tired, ask God to renew your strength and give you rest.","Let Godâ€™s love be your motivationâ€”He cares more about your heart than a grade.","Study with a grateful heart: every answer is a gift from Him.","When doubt creeps in, remember that God believes in you and your purpose.","Keep your eyes on Christ; He walks with you through every challenge.","Study with humility: ask God to teach you what you still donâ€™t know.","Your willingness to learn honors Godâ€™s calling on your life.","Even tough chapters can bless youâ€”God uses challenges to grow you.","Pray for clarity before each practice quiz; let His light guide your mind.","Remember your â€œwhyâ€: you study to serve others and glorify God.","God gave you this season to growâ€”embrace it with joy and perseverance.","Let each success and mistake point you back to His grace.","Stay disciplined in prayer and study; God rewards faithful effort.","Keep a thankful attitude: every answered question is Godâ€™s provision.","When stress builds, fix your eyes on Jesus and breathe in His promise of peace.","Ask God to help you trust Him more than your own abilities.","Surround yourself with scripture that reminds you of His faithfulness.","Pray for fellow students; lifting others up honors Godâ€™s love.","As you study, remember: Godâ€™s power works best in your weakness.","Finish each day by thanking God for how He has helped you learn and grow."];function U(){const[r,t]=n.useState(!1),[s,o]=n.useState("");n.useEffect(()=>{const i=new Date,x=i.getFullYear(),d=String(i.getMonth()+1).padStart(2,"0"),g=String(i.getDate()).padStart(2,"0"),u=`${x}-${d}-${g}`;if(window.localStorage.getItem("motivationDismissedDate")===u)return;const h=new Date(i.getFullYear(),0,0),m=i.getTime()-h.getTime(),f=1e3*60*60*24,b=Math.floor(m/f)%H.length;o(H[b]),t(!0)},[]);const a=()=>{const i=new Date,x=i.getFullYear(),d=String(i.getMonth()+1).padStart(2,"0"),g=String(i.getDate()).padStart(2,"0"),u=`${x}-${d}-${g}`;window.localStorage.setItem("motivationDismissedDate",u),t(!1)};return r?e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded shadow-sm max-w-3xl mx-auto",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-yellow-800",children:s}),e.jsx("button",{onClick:a,className:"ml-4 text-yellow-600 hover:text-yellow-800","aria-label":"Close daily message",children:"Ã—"})]})}):null}const X=({currentQuestion:r,selectedChoice:t,onChoiceClick:s,onNext:o,formatElapsedTime:a,questionNumber:i,totalQuestions:x})=>e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-4 text-green-700 antialiased",children:["ðŸ“‹ Question ",i," of ",x]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4 antialiased",children:["Elapsed Time: ",a]}),e.jsxs("div",{className:"p-6 bg-white border rounded-2xl shadow relative text-gray-800 antialiased",children:[e.jsx("p",{className:"font-semibold mb-4 text-lg leading-relaxed",children:r.question}),e.jsx("ul",{className:"space-y-2",children:r.choices.map((d,g)=>{let u="";return t&&(d===r.answer?u="bg-green-200 border-green-500":d===t&&(u="bg-red-200 border-red-500")),e.jsx("li",{children:e.jsx("button",{onClick:()=>s(d),disabled:!!t,className:`block w-full text-left p-3 border rounded text-gray-800 ${u} ${t?"":"hover:bg-gray-100"}`,children:d})},g)})}),t&&e.jsxs("div",{className:"mt-6 p-4 rounded border bg-gray-100 border-gray-300",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Explanation:"}),e.jsx("p",{className:"italic leading-relaxed",children:r.explanation})]}),t&&e.jsx("button",{onClick:o,className:"mt-6 px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:i<x?"Next Question":"Finish"})]}),e.jsx(U,{})]}),Z=({score:r,total:t,percentage:s,formatElapsedTime:o,passed:a,onRetake:i,onNextPart:x,userAnswers:d})=>{const[g,u]=n.useState(!1),j=()=>{u(!1),setTimeout(()=>window.print(),100)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-green-700 antialiased",children:"âœ… Summary"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-1 text-gray-800 antialiased",children:[e.jsxs("p",{children:["Points: ",r," / ",t]}),e.jsxs("p",{children:["Percentage Score: ",s.toFixed(2),"%"]}),e.jsxs("p",{children:["Total Time: ",o]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-2 text-gray-800 antialiased",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition",children:"Retake"}),e.jsx("button",{onClick:x,disabled:!a,className:`px-4 py-2 rounded transition font-semibold text-white
              ${a?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed opacity-75"}`,children:"Next Part"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition",children:"Print"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 antialiased",children:"Review of Answers:"}),d.map((h,m)=>e.jsxs("div",{className:"p-4 border rounded mb-4 bg-white text-gray-800 antialiased",children:[e.jsx("p",{className:"font-semibold mb-2",children:`${m+1}. ${h.question}`}),e.jsx("ul",{className:"list-disc list-inside mb-2",children:h.choices.map((f,y)=>{const b=f===h.correct?"text-green-600":f===h.selected?"text-red-600":"text-gray-700";return e.jsx("li",{className:b,children:f},y)})}),e.jsxs("p",{className:"text-sm",children:["Your Answer:"," ",e.jsx("span",{className:h.selected===h.correct?"text-green-600":"text-red-600",children:h.selected})]}),e.jsxs("p",{className:"text-sm",children:["Correct Answer:"," ",e.jsx("span",{className:"text-green-600",children:h.correct})]}),e.jsx("p",{className:"text-sm italic mt-1",children:h.explanation})]},m))]})]}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full text-center text-gray-800 antialiased",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Support Our Site"}),e.jsx("p",{className:"mb-4",children:"If you find this site helpful, you can donate any amount by scanning the Gcash QR code below."}),e.jsx("img",{src:"/images/gcash-qr.webp",alt:"Donation QR Code",className:"mx-auto w-48 h-48 mb-4"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Continue to Print"})]})})]})},ee=({subjectName:r,part:t,onStart:s})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full text-center text-gray-900",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Welcome to ",r," Part ",t]}),e.jsxs("p",{className:"mb-4",children:["You are about to start ",e.jsxs("strong",{children:["Part ",t]})," of ",e.jsx("strong",{children:r}),". Aim to score at least ",e.jsx("strong",{children:"80%"})," to unlock the next part!"]}),e.jsx("p",{className:"italic mb-6",children:"Stay focused and do your best. Youâ€™ve got this! ðŸ’ª"}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Start Quiz"})]})}),te=K.memo(ee);function se({isOpen:r,onContinue:t,groupLink:s,modalMessage:o,examName:a}){return r?(s||console.warn("[CommunityJoinModal] No groupLink provided."),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full text-center text-gray-900",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:a?`Join Our ${a} Facebook Community`:"Join Our Facebook Community"}),e.jsx("p",{className:"mb-4",children:o||"Before you continue, please join our FB group for free review materials:"}),s?e.jsx("button",{onClick:()=>window.open(s,"_blank"),className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mb-4",children:"Join the Group"}):e.jsx("div",{className:"text-red-600 mb-4",children:"Facebook group link is missing."}),e.jsx("br",{}),e.jsx("button",{onClick:t,className:"mt-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Iâ€™ve Joined, Continue to Quiz"})]})})):null}const F=r=>{const t=[...r];for(let s=t.length-1;s>0;s--){const o=Math.floor(Math.random()*(s+1));[t[s],t[o]]=[t[o],t[s]]}return t},ae=({questions:r,subjectId:t,subjectName:s,part:o,examId:a,seo:i,hasJoinedGroup:x,fbUrl:d,examName:g,modalMessage:u})=>{console.log("[Questions.tsx] Props â†’","examId:",a,"hasJoinedGroup:",x,"fbUrl:",d,"examName:",g,"modalMessage:",u);const[j,h]=n.useState(!0),[m,f]=n.useState([]),[y,b]=n.useState(0),[R,N]=n.useState(null),[C,G]=n.useState(0),[A,E]=n.useState([]),[S,J]=n.useState(!1),[v,k]=n.useState(0),[O,T]=n.useState(x),p=n.useRef(null);n.useEffect(()=>(p.current=window.setInterval(()=>k(c=>c+1),1e3),()=>{p.current&&window.clearInterval(p.current)}),[]),n.useEffect(()=>{S&&p.current&&window.clearInterval(p.current)},[S]);const $=n.useCallback(()=>{const c=F(r).map(l=>{const w=F(l.choices);return{...l,choices:w}});f(c),b(0),N(null),G(0),E([]),J(!1),k(0),p.current&&window.clearInterval(p.current),p.current=window.setInterval(()=>k(l=>l+1),1e3)},[r]);n.useEffect(()=>{$()},[$]);const Q=n.useCallback(c=>{N(c);const l=m[y];c===l.answer&&G(w=>w+1),E(w=>{const D=[...w,{questionId:l.id,question:l.question,choices:l.choices,selected:c,correct:l.answer,explanation:l.explanation}],z=`prc_progress_${a}_${t}_${o}`;return window.localStorage.setItem(z,JSON.stringify({answered:D.length,total:m.length})),D})},[y,m,a,t,o]),Y=()=>{if(y+1<m.length)b(c=>c+1),N(null);else{const c=`prc_unlocked_${a}_${t}`,l=JSON.parse(window.localStorage.getItem(c)||"[]");l.includes(o)||(l.push(o),window.localStorage.setItem(c,JSON.stringify(l))),J(!0)}},M=Math.round(C/m.length*100),q=M>=80,I=[{label:"Home",href:"/"},{label:s,href:`/exams/${a}/subjects/${t}/parts`},{label:`Part ${o}`}],P=y===4&&!O,_=async()=>{var c;console.log("[Questions.tsx] handleJoinedClick: examId =",a,"fbUrl =",d);try{await fetch(`/group-modal/joined/${a}`,{method:"POST",headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""}})}catch(l){console.error("[Questions.tsx] Failed to mark joined:",l)}finally{T(!0)}};return e.jsxs(L,{children:[e.jsxs(W,{children:[e.jsx("title",{children:i.title}),e.jsx("meta",{name:"description",content:i.description}),e.jsx("link",{rel:"canonical",href:i.canonical})]}),j?e.jsx(te,{subjectName:s,part:o,onStart:()=>h(!1)}):S?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(Z,{score:C,total:m.length,percentage:M,formatElapsedTime:`${Math.floor(v/60)}m ${v%60}s`,passed:q,onRetake:$,onNextPart:()=>B.visit(`/exams/${a}/subjects/${t}/parts/${o+1}/questions`),userAnswers:A})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx(V,{items:I}),P?e.jsx(se,{isOpen:P,onContinue:_,groupLink:d,examName:g,modalMessage:u}):e.jsx(X,{currentQuestion:m[y],selectedChoice:R,onChoiceClick:Q,onNext:Y,questionNumber:y+1,totalQuestions:m.length,formatElapsedTime:`${Math.floor(v/60)}m ${v%60}s`})]})]})};export{ae as default};
